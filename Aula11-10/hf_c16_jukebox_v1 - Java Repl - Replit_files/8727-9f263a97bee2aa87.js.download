(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8727],{33473:function(e,n,t){"use strict";var r=t(35944),i=t(69346),o=t(81255),l=t(61756),a=t(81456);n.Z=function(e){return(0,r.BX)(i.ZP,{css:[o.l0.rowWithGap(2),o.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(l.ZP,{colorway:e.colorway,iconLeft:e.icon,stretch:!0,onClick:e.onClick,text:e.text,css:[o.l0.flex.growAndShrink(1),o.l0.borderRadius(8,0,0,8)]}),(0,r.tZ)(l.ZP,{colorway:e.colorway,onClick:e.onCountClick,text:(0,a.d)(e.count),css:[o.l0.borderRadius(1,8,8,1)]})]})}},98923:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(26042),i=t(7297),o=t(31230),l=t(46829);function a(){var e=(0,i.Z)(["\n  query IsUserEnrolled($courseSlug: String!) {\n    currentUser {\n      id\n      course(slug: $courseSlug) {\n        ... on UserCourse {\n          id\n          __typename\n        }\n        ... on NotFoundError {\n          __typename\n        }\n        ... on UnauthorizedError {\n          __typename\n        }\n        ... on UserError {\n          __typename\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}var c={},u=(0,o.ZP)(a());var s=function(e){var n,t,i=function(e){var n=(0,r.Z)({},c,e);return l.useQuery(u,n)}({variables:{courseSlug:e.courseSlug}}),o=i.data,a=i.loading,s=i.refetch,d="CurrentUser"===(null===o||void 0===o||null===(n=o.currentUser)||void 0===n?void 0:n.__typename),m=d&&"UserCourse"===(null===(t=o.currentUser)||void 0===t?void 0:t.course.__typename)?o.currentUser.course.id:void 0;return{isLoggedIn:d,isEnrolled:!!m,isLoading:a,userCourseId:m,refetch:s}}},57249:function(e,n,t){"use strict";t.d(n,{Z:function(){return V},S:function(){return A}});var r=t(47568),i=t(26042),o=t(69396),l=t(34051),a=t.n(l),c=t(35944),u=t(67294),s=t(7297),d=t(31230);function m(){var e=(0,s.Z)(["\n  fragment PostBodyTextAreaUser on User {\n    id\n    username\n    image\n  }\n"]);return m=function(){return e},e}function p(){var e=(0,s.Z)(["\n  query PostBodyTextAreaUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...PostBodyTextAreaUser\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h=(0,d.ZP)(m()),f=(0,d.ZP)(p(),h);var Z=t(16965),v=t(10253),g=t(16496),b=t.n(g),C=t(18332),y=t(96594);var w=t(30758),x=t(82670),R=t(29815),P=t(32703),S=t(62722),k=t(7657);function B(e){var n=e.initialValue,t=e.textTriggers,i=(0,u.useState)(n||""),o=i[0],l=i[1],c=(0,u.useRef)(null),s=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,u.useRef)(null),i=(0,v.Z)((0,C.Z)(n),2),o=i[0].suggestions,l=i[1],a=(0,y.Kb)({items:(null===o||void 0===o?void 0:o.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(o),onSelectedItemChange:function(e){var n=e.selectedItem;if(o&&n){var i=r.current;if(i){var l=o.applySuggestion({targetValue:i.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),c=(0,u.useMemo)((function(){if(o&&r.current)return b()(r.current,o.textTrigger.index)}),[o]);return{ref:(0,u.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===o||void 0===o?void 0:o.results,caretCoordinates:c,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;l(t),setTimeout((function(){c.current&&c.current.setSelectionRange(n,n)}))}}),d=s.combobox,m=s.caretCoordinates,p=s.suggestions,h=s.ref,f=function(e){var n=(0,u.useRef)(null),t=(0,Z.Z)(e.onChange),i=(0,Z.Z)(e.onError),o=(0,u.useCallback)((function(e){n.current=e}),[]),l=(0,u.useCallback)(function(){var e=(0,r.Z)(a().mark((function e(r){var o,l,c,u,s,d,m,p,h,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.current){e.next=3;break}return e.abrupt("return");case 3:return l=o.value,c=o.selectionStart?o.selectionStart:l.length,u=r.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),s=l.substr(0,c),d=l.substr(c),m=(0,R.Z)(u),s&&m.unshift(s),d&&m.push(d),t.current(m.join("\n")),p=[],e.prev=13,e.next=16,(0,P.L0)(r);case 16:p=e.sent,e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(13),i.current(e.t0),e.abrupt("return");case 23:return h=[],e.prev=24,e.next=27,Promise.all(p.map((function(e){return(0,S.mh)(e,k.N.CommunityPost)})));case 27:h=e.sent,e.next=34;break;case 30:return e.prev=30,e.t1=e.catch(24),i.current(e.t1),e.abrupt("return");case 34:if(n.current){e.next=36;break}return e.abrupt("return");case 36:f=u.reduce((function(e,n,t){var i=r[t].name.replace(/\.[^/.]+$/,""),o=h[t],l=(0,x.Z)(o,Error)?"Error uploading":o.url;return e.replace(n,"![".concat(i,"](").concat(l,")"))}),n.current.value),t.current(f);case 38:case"end":return e.stop()}}),e,null,[[13,19],[24,30]])})));return function(n){return e.apply(this,arguments)}}(),[t,i]),c=(0,u.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&l(n)}),[l]);return{ref:o,handleFiles:l,handlePaste:c}}({onChange:l,onError:function(){}}),g=f.handleFiles,B=f.handlePaste,I=f.ref,U=(0,v.Z)((0,w.Z)((function(e){null!==e&&g(e)})),2)[1],E=(0,u.useCallback)((function(e){c.current=e,h(e),I(e)}),[h,I]),G=(0,u.useCallback)((function(e,n){var t;null===(t=c.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:E,value:o,setValue:l,dropZoneHandlers:U,handlePaste:B,combobox:d,caretCoordinates:m,suggestions:p,setSelectionRange:G}}var I=t(57731),U=t(32951),E=t(25019),G=t(4306),T=t(58809),H=t(65975),W=t(37424),_=(0,H.KD)("div"),X=(0,H.KD)("li");function A(e){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.l){e.next=2;break}throw new Error("Expected apolloClient");case 2:return e.next=4,T.l.query({query:f,variables:{query:n,limit:5}});case 4:return t=e.sent.data,e.abrupt("return",t.usernameSearch);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){var n,t=e.onChange,l=e.initialValue,s=e.autoFocus,d=e.placeholder,m=e.onKeyDown,p=e.onBlur,h=e.onFocus,f=e.userSearch,v=e.showLabel,g=(0,u.useRef)(l),b=(0,Z.Z)(t),C=function(e){var n=e.initialValue,t=e.userSearch,i=void 0===t?A:t,o=B({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{icon:(0,c.tZ)(I.Z,{alt:e.username,src:e.image,size:16}),value:e.username}})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}});return o}({initialValue:l,userSearch:f}),y=C.setSelectionRange;(0,U.Z)((function(){b.current(C.value)}),[C.value]),(0,u.useEffect)((function(){if(s&&g.current){var e=g.current.length;y(e,e)}}),[s,y]);var w=(0,W.H)();return(0,c.BX)(_,(0,o.Z)((0,i.Z)({css:{position:"relative"}},C.combobox.getComboboxProps()),{children:[(0,c.BX)(H.G7,{css:[H.l0.colWithGap(4)],children:[v?(0,c.tZ)("label",{htmlFor:w("description"),children:(0,c.tZ)(H.xv,{color:"dimmer",variant:"small",children:"Description"})}):null,(0,c.tZ)(H.B,(0,o.Z)((0,i.Z)({},C.combobox.getInputProps({placeholder:d||"Write something about this post",ref:C.ref,onKeyDown:function(e){C.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),m&&m(e)},onBlur:p,onFocus:h,value:C.value,onChange:function(e){return C.setValue(e.currentTarget.value)},onPaste:C.handlePaste,autoFocus:s})),{css:[H.l0.width("100%"),{minHeight:H.TV.space128,resize:"vertical"}],id:w("description")}))]}),(0,c.tZ)(_,(0,o.Z)((0,i.Z)({},C.combobox.getMenuProps()),{css:[{position:"absolute"},C.caretCoordinates&&{top:C.caretCoordinates.top+C.caretCoordinates.height,left:C.caretCoordinates.left-4}],children:(null===(n=C.suggestions)||void 0===n?void 0:n.length)?(0,c.tZ)(E.Z,{css:{position:"relative",maxWidth:180},children:C.suggestions.map((function(e,n){return(0,c.tZ)(X,(0,o.Z)((0,i.Z)({},C.combobox.getItemProps({item:e,index:n})),{children:(0,c.tZ)(G.Z,{title:e.value,selected:C.combobox.selectedItem===e,highlighted:C.combobox.highlightedIndex===n,icon:e.icon?(0,c.tZ)(H.G7,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},54917:function(e,n,t){"use strict";t.d(n,{EQ:function(){return E},Ex:function(){return I},Sh:function(){return U},Yt:function(){return R},g4:function(){return C},l0:function(){return k},nQ:function(){return w},pl:function(){return S},tE:function(){return y},wb:function(){return P}});var r=t(35944),i=t(67294),o=t(59369),l=t(34847),a=t(69346),c=t(33773),u=t(82447),s=t(94718),d=t(57249),m=t(75026),p=t(64080),h=t(53429),f=t(42844),Z=t(64184),v=t(18757),g=t(57704),b=t(65975);function C(e){var n=e.onClick;return(0,r.tZ)(b.zx,{small:!0,onClick:n,outlined:!0,text:"Reply",colorway:"primary",css:[b.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function y(e){var n=e.onClick,t=e.repliesCount,i=e.isExpanded,o="".concat(i?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(b.zx,{small:!0,onClick:n,outlined:!0,text:o,css:[b.l0.color.foregroundDimmer,b.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:i?0:270})})}var w,x=(0,a.KD)("a");function R(e){var n=e.user;return(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(b.qE,{size:32,username:n.username,src:n.image})})})}function P(e){var n=e.user,t=e.action,i=e.timeCreated;return(0,r.BX)(a.ZP,{css:[b.l0.flex.row,b.l0.align.center,b.l0.flex.wrap,{maxWidth:"100%",gap:b.TV.space4}],children:[(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(x,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(b.xv,{color:"dimmer",children:t}):null,(0,r.tZ)(b.EK,{date:i,textColor:"dimmest",textVariant:"small"})]})}function S(e){var n=e.canEdit,t=e.canDelete,l=e.canReport,c=e.canEditSettings,u=e.canHideComment,s=e.canShowComment,d=e.onAction,m=e.className,b=(0,i.useState)(!1),C=b[0],y=b[1],x=[];return n&&x.push({label:w.Edit,icon:(0,r.tZ)(p.Z,{})}),l&&x.push({label:w.Report,icon:(0,r.tZ)(h.Z,{})}),c&&x.push({label:w.Settings,icon:(0,r.tZ)(f.Z,{})}),u&&x.push({label:w.Hide,icon:(0,r.tZ)(Z.Z,{})}),s&&x.push({label:w.Show,icon:(0,r.tZ)(v.Z,{})}),t&&x.push({label:w.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),x.length?(0,r.tZ)(a.ZP,{className:m,css:[{opacity:C?1:0,".is-touch-device &":{opacity:1}}],children:(0,r.tZ)(o.Z,{label:"Comment Actions",onOpenChange:y,items:x,onItemClick:function(e){d(e.label)}})}):null}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment"}(w||(w={}));var k=(0,a.KD)("form"),B=i.createContext(void 0);function I(){return i.useContext(B)}var U=B.Provider;function E(e){var n=e.initialValue,t=e.placeholder,o=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,p=e.buttonIcon,h=void 0===p?(0,r.tZ)(m.Z,{}):p,f=e.error,Z=(0,i.useState)(!1),v=Z[0],g=Z[1],C=(0,i.useState)(n),y=C[0],w=C[1],x=I();return(0,r.BX)(k,{css:[b.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(y)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(y)},initialValue:y,placeholder:t,onChange:w,onFocus:function(){return g(!0)},userSearch:x}),f?(0,r.BX)(a.ZP,{css:[b.l0.display.block],children:[(0,r.tZ)(b.xv,{css:[b.l0.color.redDefault],children:f})," ",(0,r.BX)(b.xv,{children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,v||!c?(0,r.BX)(a.ZP,{css:[b.l0.rowWithGap(8),b.l0.justify.end],children:[(0,r.tZ)(b.zx,{text:"Cancel",onClick:function(e){g(!1),o&&o(e)}}),(0,r.tZ)(b.zx,{type:"submit",text:s,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!y})]}):null]})}},68727:function(e,n,t){"use strict";t.d(n,{G:function(){return Xe},Z:function(){return Ae}});var r=t(14924),i=t(26042),o=t(69396),l=t(10253),a=t(29815),c=t(35944),u=t(67294),s=t(90317),d=t(52013),m=t(47568),p=t(34051),h=t.n(p),f=t(90473),Z=t(81255),v=t(11163),g=t(65975),b=t(58057),C=t(67620),y=t(69346),w=t(1144),x=t(93058),R=t(34847),P=t(519);function S(e){var n=e.count;return n>0?(0,c.BX)(y.ZP,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(w.x,{children:n}),(0,c.tZ)(w.x,{color:"dimmer",children:(0,R.Z)("comment",n)})]}):(0,c.tZ)(w.x,{color:"dimmer",multiline:!0,children:"No comments yet"})}function k(e){var n,t=e.repl,r=(0,x.Z)(),a=r.showConfirm,u=r.showError,s=(0,l.Z)((0,C.k2)({onError:function(e){return u(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&a("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):u(t.message)}}),1),d=s[0],m=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,c.BX)(y.ZP,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center],children:[m?(0,c.tZ)(S,{count:t.commentCount}):(0,c.tZ)(w.x,{color:"dimmer",multiline:!0,children:"Adding comments has been turned off for this Repl."}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)&&(0,c.BX)(y.ZP,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,c.tZ)(w.x,{children:"Allow comments"}),(0,c.tZ)(P.Z,{isOn:m,onChange:function(){return d({variables:{input:{replId:t.id,enabled:!m}},optimisticResponse:{setReplCommentSettings:(0,o.Z)((0,i.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!m}})}})}})]})]})}var B=t(57249),I=t(54917),U=t(77365);function E(e){var n,t,l,s=e.replId,d=(0,v.useRouter)().query,p=(0,f.ex)({ssr:!1,variables:{replId:s,after:d.after?d.after.toString():void 0,count:25}}),C=p.data,y=p.loading,w=p.fetchMore,x=p.refetch,R="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,P=!(!R||"User"!==(null===(n=R.owner)||void 0===n?void 0:n.__typename))&&(null===R||void 0===R?void 0:R.owner.isBlockingCurrentUser),S=null===C||void 0===C?void 0:C.currentUser,E=null===R||void 0===R?void 0:R.comments.pageInfo,G=(0,u.useMemo)((function(){return R&&S?function(e){var n,t=e.repl,i=e.currentUser,o="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,r.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){o[e.username]=e})),i&&delete o[i.username],Object.values(o)}({repl:R,currentUser:S}):[]}),[R,S]),T=!(null===R||void 0===R?void 0:R.commentSettings)||R.commentSettings.enabled,H=(l=G,function(){var e=(0,m.Z)(h().mark((function e(n){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null===n||void 0===n?void 0:n.toLowerCase(),!((r=l.filter((function(e){return!t||e.username.toLowerCase().includes(t)}))).length<5&&n)){e.next=7;break}return e.next=5,(0,B.S)(n);case 5:e.sent.forEach((function(e){r.some((function(n){return n.username===e.username}))||r.push(e)}));case 7:return e.abrupt("return",r.slice(0,5));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return(0,c.BX)(g.G7,{css:[Z.l0.colWithGap(16)],children:[y&&(0,c.BX)(g.G7,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(U.Z,{}),(0,c.tZ)(g.xv,{children:"Loading comments..."})]}),R&&!P?(0,c.BX)(c.HY,{children:[(0,c.BX)(I.Sh,{value:H,children:[(0,c.tZ)(k,{repl:R}),S&&T?(0,c.tZ)(b.H,{onComment:function(){return x()},replId:R.id,placeholder:R?"Say something about ".concat(R.title):""}):null,null===(t=R.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,c.tZ)(b.x,{commentsEnabled:T,comment:e,onReply:function(){return x()},onDelete:function(){return x()}},e.id)}))]}),(null===E||void 0===E?void 0:E.nextCursor)&&R?(0,c.tZ)(g.G7,{children:(0,c.tZ)("a",{href:R.url+"?after="+E.nextCursor,onClick:function(e){e.preventDefault(),y||w({variables:{after:E.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{comments:(0,o.Z)((0,i.Z)({},l.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(l.comments.items))})})}):e}})},children:y?"Loading...":"Load more comments"})}):null]}):null,R&&P?(0,c.BX)(g.G7,{css:[Z.l0.colWithGap(24),Z.l0.align.center,Z.l0.textAlign.center],children:[(0,c.tZ)(g.xv,{variant:"subheadBig",multiline:!0,children:"You\u2019re blocked"}),(0,c.BX)(g.xv,{children:["You can\u2019t follow, comment or see"," ",R.owner&&"User"===R.owner.__typename?R.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var G=t(86292),T=t(4924),H=t(70917),W=t(61756),_=t(5886),X=t(92002),A=t(83074),D=t(64080),V=t(75026),M=t(99843),F=t(57263),$=t(88046),L=t(59292),z=t(1879),q=t(98967),j=t(65400),Q=t(41664),N=t.n(Q),O=t(23223),Y=t(70570),K=t(82447),J=t(94718),ee=t(5804),ne=t(2896),te=t(53427),re=t(81456),ie=t(47024),oe=(0,y.KD)("a"),le={template:{background:Z.TV.yellowDimmest,foreground:Z.TV.yellowStrongest},app:{background:Z.TV.accentPrimaryDimmest,foreground:Z.TV.accentPrimaryStrongest}};function ae(e){var n=e.colorway,t=e.text;return(0,c.tZ)(y.ZP,{css:[{backgroundColor:n.background},Z.l0.borderRadius(8),Z.l0.px(4),Z.l0.py(2)],children:(0,c.tZ)(y.ZP,{css:[{color:n.foreground,fontSize:Z.TV.fontSizeSmall}],children:t})})}function ce(e){var n,t,l,a,u,d,m,p,h=e.repl,f=e.currentUser,v=h.owner,g=h.lastPublishedAt||(null===(n=h.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated),b=v&&v.id===(null===f||void 0===f?void 0:f.id);return(0,c.BX)(y.ZP,{css:[Z.l0.colWithGap(32)],children:[(0,c.BX)(y.ZP,{css:[Z.l0.colWithGap(16)],children:[(0,c.tZ)(y.ZP,{css:[Z.l0.rowWithGap(8),Z.l0.align.start],children:(0,c.BX)(y.ZP,{css:[Z.l0.colWithGap(8),Z.l0.flex.growAndShrink(1)],children:[(0,c.BX)(y.ZP,{css:(m={},(0,r.Z)(m,"@media (max-width: ".concat(F.j.tabletMin-1,"px)"),[Z.l0.colWithGap(8)]),(0,r.Z)(m,"@media (min-width: ".concat(F.j.tabletMin,"px)"),[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center]),m),children:[v?(0,c.tZ)(c.HY,{children:(0,c.BX)(y.ZP,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.flex.wrap,{gap:Z.TV.space8}],dataCy:"cover-page-user",children:[(0,c.tZ)(J.Z,{inline:!0,username:v.username,children:(0,c.tZ)(K.ZP,{user:v,children:(0,c.tZ)(oe,{css:[Z.l0.color.foregroundDefault],children:(0,c.tZ)(Y.Z,{username:v.username,src:(null===v||void 0===v?void 0:v.image)||null})})})}),!b&&(0,c.tZ)(ie.Z,{subtle:!0,small:!0,user:v}),(0,c.tZ)(w.x,{color:"dimmer",children:"User"===v.__typename&&v.followerCount>0?(0,re.d)(v.followerCount)+(p=v.followerCount,p>1?" followers":" follower"):null})," "]})}):(0,c.tZ)(Y.Z,{small:!0,src:null,username:"[deleted]"}),(null===(l=h.source)||void 0===l||null===(a=l.deployment)||void 0===a||null===(u=a.repl)||void 0===u?void 0:u.owner)&&(0,c.BX)(y.ZP,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(w.x,{color:"dimmest",children:"Made with "}),(0,c.tZ)(N(),(0,o.Z)((0,i.Z)({},(0,$.aq)(h.source.deployment.repl)),{passHref:!0,children:(0,c.BX)(oe,{css:[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.color.foregroundDefault],children:[(0,c.tZ)(te.ZP,{size:24,alt:h.source.deployment.repl.templateLabel,iconUrl:h.source.deployment.repl.iconUrl}),(0,c.tZ)(w.x,{children:h.source.deployment.repl.templateLabel})]})}))]})]}),(0,c.BX)(y.ZP,{css:[Z.l0.rowWithGap(8),Z.l0.align.center,(0,r.Z)({},"@media (max-width: ".concat(F.j.tabletMin,"px)"),[Z.l0.colWithGap(8),Z.l0.align.start])],children:[(0,c.BX)(y.ZP,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[h.publishedAs===s.O2.Template?(0,c.tZ)(ae,{colorway:le.template,text:"Template"}):null,h.publishedAs===s.O2.App?(0,c.tZ)(ae,{colorway:le.app,text:"App"}):null,g?(0,c.BX)(w.x,{color:"dimmer",variant:"small",children:["Published on"," ",new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(null===(d=h.origin)||void 0===d?void 0:d.owner)?(0,c.BX)(w.x,{color:"dimmer",variant:"small",children:["Forked from"," ",(0,c.tZ)(K.ZP,{user:h.origin.owner,children:(0,c.tZ)("a",{children:h.origin.owner.username})}),"/",(0,c.tZ)(N(),(0,o.Z)((0,i.Z)({},(0,$.aq)(h.origin)),{children:(0,c.tZ)("a",{children:h.origin.title})}))]}):null]})]})}),h.tags.length?(0,c.tZ)(y.ZP,{children:(0,c.tZ)(y.ZP,{tag:"ul","aria-label":"Tags",css:[{flexWrap:"wrap",margin:"calc(".concat(Z.TV.space4," * -1)")},Z.l0.flex.row],children:h.tags.map((function(e){var n=(0,ee.M6)(e.id);return(0,c.tZ)("li",{css:{listStyle:"none"},children:(0,c.tZ)(ne.Z,{text:"#"+e.id,css:[{margin:Z.TV.space4}],href:n.href,as:n.as})},e.id)}))})}):null,h.description?(0,c.tZ)(y.ZP,{children:(0,c.tZ)(O.Z,{css:{backgroundColor:"transparent"},children:h.description})}):(0,c.tZ)(w.x,{color:"dimmest",children:"This Repl has no description"})]}),(0,c.tZ)(y.ZP,{css:[{borderBottom:"1px solid ".concat(Z.TV.outlineDefault)}]})]})}var ue,se,de,me,pe=t(71158),he=t(93160),fe=t(25958),Ze=t(33473),ve=t(6600),ge=t(80658),be=t(61193),Ce=t(28592),ye=t(97808),we=t(87514),xe=t(62913),Re=function(e){var n=e.variant,t=void 0===n?"default":n,i=e.backgroundImage,o=e.title,l=e.body,s=e.ctaText,d=e.icon,m=e.onClick,p=e.href,h=e.isLoggedIn,f=e.needsAuthentication,Z=e.disabled,v=(0,u.useState)(!1),b=v[0],C=v[1],y=(0,x.Z)().showError,w=(0,u.useState)(!1),R=w[0],P=w[1];if(!m&&!p)throw new Error("BaseBanner: onClick or href must be provided");if(!m&&f)throw new Error("BaseBanner: onClick must be provided if needsAuthentication is true");var S,k=(0,c.BX)(g.G7,{onClick:function(){if(f&&!h&&!R)return C(!0),void(0,G.j)(G.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"related-repls"});Z||void 0===m||m()},css:["default"===t?g.l0.flex.row:g.l0.flex.column,g.l0.width("100%"),g.l0.maxWidth(535),g.l0.cursor.pointer,g.l0.overflow("hidden"),g.l0.borderRadius(8),g.l0.backgroundColor.backgroundDefault,(S={},(0,r.Z)(S,"@media(max-width: ".concat(F.j.mobileMax,"px)"),[g.l0.flex.column]),(0,r.Z)(S,"margin","auto"),S),{boxShadow:"0px 0px 18px rgba(178, 217, 255, 0.25)",border:"1px solid #B2D9FF"}],children:[(0,c.tZ)(g.G7,{css:(0,a.Z)(["default"===t?[g.l0.width("50%")]:[g.l0.width("100%"),g.l0.height(132)]]).concat([{background:"url(".concat((0,xe.X)({src:i,width:876}),")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},(0,r.Z)({},"@media(max-width: ".concat(F.j.mobileMax,"px)"),[g.l0.width("100%"),g.l0.height(100)])])}),(0,c.BX)(g.G7,{css:(0,a.Z)(["default"===t?[g.l0.width("50%")]:[g.l0.width("100%"),g.l0.height("100%")]]).concat([g.l0.p(16),g.l0.textAlign.left,(0,r.Z)({},"@media(max-width: ".concat(F.j.mobileMax,"px)"),[g.l0.width("100%"),g.l0.height("100%")])]),children:[(0,c.tZ)(g.xv,{variant:"subheadDefault",multiline:!0,css:[g.l0.pb(4)],children:o}),(0,c.tZ)(g.xv,{variant:"text",multiline:!0,css:[g.l0.pb(8)],children:l}),(0,c.tZ)(g.zx,{text:s,outlined:!0,css:[g.l0.width("fit-content"),g.l0.align.start],iconLeft:d})]})]}),B=f?(0,c.tZ)(z.Z,{onRequestClose:function(){return C(!1)},isOpen:b,maxWidth:872,children:(0,c.tZ)(q.Z,{onSuccess:function(){P(!0),Z||void 0===m||m()},onFailure:function(e){var n=e.error;P(!1),y(n)},title:R&&Z?"Sit tight":"Sign up",description:R&&Z?"We\u2019re setting up your workspace\u2026":"Sign up and create your first repl."})}):null;return p?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N(),{href:p,passHref:!0,children:(0,c.tZ)("a",{css:[g.l0.color.foregroundDefault],children:k})}),B]}):(0,c.BX)(c.HY,{children:[k,B]})},Pe=function(){var e=(0,ye.QW)(ye.yb);return(0,c.tZ)(Re,{variant:"vertical",backgroundImage:"/public/images/100-days-of-python/banner.jpg",title:"Brand new to coding?",body:"Write your first line of Python today.",ctaText:"Start This Course",href:"/learn/".concat(e.slug,"?utm_source=cover_page"),icon:(0,c.tZ)(we.Z,{})})},Se=t(92876),ke=function(e){var n=e.isLoggedIn,t="b7292411-5efe-4c15-be23-060d48a9a6d6",r=(0,l.Z)((0,L.Z)({onError:function(){Se.$e((function(e){e.setExtra("templateId",t),Se.Tb(new Error("BaseBanner: Failed to fork template"))}))}}),2),i=r[0],o=r[1].loading;return(0,c.tZ)(Re,{variant:"vertical",isLoggedIn:n,needsAuthentication:!0,backgroundImage:"/public/images/javascript-tutorial-banner-1.jpg",title:"Learn JavaScript",body:"Make a calculator that can determine the total bill after tip.",ctaText:"Start Tutorial",icon:(0,c.tZ)(we.Z,{}),onClick:function(){o||i({originId:t,trackingData:{forkSource:"relatedReplsSection"}})},disabled:o})},Be=t(98923),Ie=function(e){var n=e.repl,t=(0,Ce.useFlags)()["flag-expt-100-days-of-code-entries"],r=(0,Be.Z)({courseSlug:ye.yb}),i=r.isLoggedIn,o=r.isEnrolled;if(r.isLoading||void 0===t)return null;var l=("Repl"===n.__typename?n.tags.map((function(e){return e.id})):[]).includes("javascript");return i&&o||!t?l?(0,c.tZ)(ke,{isLoggedIn:i}):null:(0,c.tZ)(Pe,{})},Ue=function(e){return"@media (max-width: ".concat(e,"px)")},Ee={mobile:Ue(F.j.tabletMin),small:(se=F.j.tabletMin+1,de=F.j.tabletMax,"@media (min-width: ".concat(se,"px) and (max-width: ").concat(de,"px)")),smallAndMobile:Ue(F.j.tabletMax),desktop:(ue=F.j.tabletMax+1,"@media (min-width: ".concat(ue,"px)"))},Ge=function(e){return{name:e,gridArea:(0,H.iv)({gridArea:e})}},Te={header:Ge("header"),cta:Ge("cta"),main:Ge("main"),secondary:Ge("secondary"),auxiliary:Ge("auxiliary")},He={mobile:(0,H.iv)({gridTemplateAreas:'\n      "'.concat(Te.header.name,'"\n      "').concat(Te.cta.name,'"\n      "').concat(Te.main.name,'"\n      "').concat(Te.auxiliary.name,'"\n      "').concat(Te.secondary.name,'"\n      ')}),small:(0,H.iv)({gridTemplateColumns:"1fr auto auto 25%",gridTemplateRows:"auto",gridTemplateAreas:'\n      "'.concat(Te.header.name," ").concat(Te.header.name," ").concat(Te.cta.name," ").concat(Te.cta.name,'"\n      "').concat(Te.main.name," ").concat(Te.main.name," ").concat(Te.main.name," ").concat(Te.main.name,'"\n      "').concat(Te.secondary.name," ").concat(Te.secondary.name," ").concat(Te.secondary.name," ").concat(Te.auxiliary.name,'"\n      ')}),desktop:(0,H.iv)({columnGap:Z.TV.space32,alignItems:"baseline",gridTemplateColumns:"1fr 25%",gridTemplateRows:"auto auto auto auto 1fr",gridTemplateAreas:'\n      "'.concat(Te.header.name," ").concat(Te.cta.name,'"\n      "').concat(Te.main.name," ").concat(Te.cta.name,'"\n      "').concat(Te.main.name," ").concat(Te.auxiliary.name,'"\n      "').concat(Te.main.name," ").concat(Te.auxiliary.name,'"\n      "').concat(Te.secondary.name," ").concat(Te.auxiliary.name,'"\n      ')})},We=function(e){var n,t=e.withSidebar;return(0,H.iv)([Z.l0.px(16),Z.l0.py(32),(n={maxWidth:1200,margin:"0 auto",display:"grid",gap:Z.TV.space16},(0,r.Z)(n,Ee.mobile,He.mobile),(0,r.Z)(n,Ee.small,[Z.l0.px(16),He.small]),(0,r.Z)(n,Ee.desktop,[Z.l0.p(32),t?He.desktop:He.small]),n)])};function _e(e){var n,t=e.repl,r=e.currentUser,a=function(){if(!r)return p(me.AuthPrompt),void(0,G.j)(G.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork"});v||p(me.ForkModal)},d=(0,l.Z)(u.useState(null),2),m=d[0],p=d[1],h=(0,l.Z)((0,L.Z)(),2),f=h[0],v=h[1].loading,g=(0,be.c)("flag-repl-analytics"),b=g.enabled,C=(g.loading,(0,$.aq)(t)),w=t.currentUserPermissions.containerWrite?(0,c.tZ)(_.Z,{colorway:"primary",iconLeft:(0,c.tZ)(D.Z,{}),stretch:!0,text:"Edit in workspace",as:C.as,href:C.href}):null,x=t.currentUserPermissions.containerWrite&&b&&t.analyticsUrl?(0,c.tZ)(_.Z,{iconLeft:(0,c.tZ)(M.Z,{}),stretch:!0,text:"Analytics",href:t.analyticsUrl}):null,R=t.currentUserPermissions.publish&&t.publishedAs&&t.publishedAs!==s.O2.Template?(0,c.tZ)(W.ZP,{text:"Add an update",type:"button",iconLeft:(0,c.tZ)(V.Z,{}),onClick:function(){return p(me.UpdateModal)}}):null,P=t.publishedAs===s.O2.Template?{text:v?"Forking...":"Use Template",icon:(0,c.tZ)(X.Z,{}),count:t.publicReleasesForkCount}:{text:v?"Forking...":"Fork Repl",icon:(0,c.tZ)(A.Z,{}),count:t.publicForkCount},S=(0,c.tZ)(Ze.Z,(0,o.Z)((0,i.Z)({},P),{onClick:a,icon:(0,c.tZ)(A.Z,{}),colorway:null===w?"primary":void 0,onCountClick:function(){return p(me.ForksModal)}})),k=(0,c.tZ)(z.Z,{maxWidth:768,isOpen:"ForksModal"===m,onRequestClose:function(){return p(null)},children:(0,c.tZ)(j.Z,{replId:t.id})}),B=(0,c.tZ)(z.Z,{isOpen:"UpdateModal"===m,onRequestClose:function(){return p(null)},children:(0,c.tZ)(ve.Z,{repl:t,onDone:function(){return p(null)},source:"coverPage"})}),I=(0,c.tZ)(z.Z,{isOpen:m===me.ForkModal,onRequestClose:function(){return p(null)},children:(0,c.tZ)(ge.Z,{onFork:function(e,n,r,i){var o,l;f({originId:t.id,teamId:e,title:n,description:r,isPrivate:i,replReleaseId:(null===(o=t.deployment)||void 0===o||null===(l=o.activeRelease)||void 0===l?void 0:l.id)||void 0,forkToPersonal:!e,trackingData:{forkSource:"replViewHeader",isApp:t.publishedAs===s.O2.App,isTemplate:t.publishedAs===s.O2.Template}})},initialTitle:t.title,initialDescription:null!==(n=t.description)&&void 0!==n?n:"",initialPrivacy:!1,hideModal:function(){return p(null)},teamContext:null===r||void 0===r?void 0:r.username})});return w?(0,c.BX)(c.HY,{children:[(0,c.BX)(y.ZP,{css:[Z.l0.colWithGap(8)],children:[w,x,R,S]}),k,I,B]}):(0,c.BX)(c.HY,{children:[S,(0,c.tZ)(z.Z,{isOpen:m===me.AuthPrompt,onRequestClose:function(){p(null)},children:(0,c.tZ)(q.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){return a()},source:"fork"})}),k,I]})}function Xe(e){var n=e.title,t=e.withSidebar,r=void 0===t||t;return(0,c.tZ)(y.ZP,{css:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1)],children:(0,c.BX)(y.ZP,{css:[Z.l0.p(16),Z.l0.flex.growAndShrink(1),We({withSidebar:r})],children:[(0,c.BX)(y.ZP,{css:[Te.header.gridArea,Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,c.tZ)(he.Z,{elevated:!0,css:[Z.l0.width(32),Z.l0.height(32),Z.l0.borderRadius("full")]}),(0,c.tZ)(w.h,{color:"dimmest",variant:"headerBig",level:1,css:[Z.l0.flex.growAndShrink(1),{wordBreak:"break-word"}],children:n||"Loading..."})]}),(0,c.tZ)(y.ZP,{css:[Te.cta.gridArea],children:(0,c.tZ)(W.ZP,{disabled:!0,text:" "})}),(0,c.tZ)(y.ZP,{css:[Te.main.gridArea,Z.l0.colWithGap(16)],children:(0,c.tZ)(he.Z,{elevated:!0,css:[Z.l0.height(500),Z.l0.borderRadius(8)]})}),(0,c.tZ)(y.ZP,{css:[Te.auxiliary.gridArea,Z.l0.colWithGap(16)],children:(0,c.BX)(y.ZP,{css:Z.l0.colWithGap(16),children:[(0,c.tZ)(w.x,{color:"dimmest",variant:"subheadDefault",children:"Loading..."}),(0,c.tZ)(y.ZP,{css:Z.l0.colWithGap(16),children:(0,a.Z)(Array(3)).map((function(e,n){return(0,c.tZ)(he.Z,{elevated:!0,css:[Z.l0.height(100),Z.l0.borderRadius(8)]},n.toString())}))})]})}),(0,c.tZ)(y.ZP,{css:[Te.secondary.gridArea]})]})})}function Ae(e){var n=e.repl,t=e.currentUser,r=e.withSidebar,i=void 0===r||r;return u.useEffect((function(){t&&!n.currentUserPermissions.containerWrite&&(0,G.j)(G.U3.REPL_GUEST_VIEW,{page:"replView"})}),[t,n.currentUserPermissions.containerWrite]),(0,c.tZ)(y.ZP,{css:[Z.l0.flex.row,Z.l0.flex.growAndShrink(1)],children:(0,c.BX)(y.ZP,{css:[Z.l0.p(16),Z.l0.flex.growAndShrink(1),We({withSidebar:i})],children:[(0,c.tZ)(y.ZP,{css:[Te.header.gridArea],children:(0,c.tZ)(fe.Z,{repl:n,iconEditable:n.currentUserPermissions.changeIconUrl,canModerate:(null===t||void 0===t?void 0:t.isModerator)||(null===t||void 0===t?void 0:t.isAdmin)})}),(0,c.tZ)(y.ZP,{css:[Te.cta.gridArea],children:(0,c.tZ)(_e,{repl:n,currentUser:t})}),(0,c.BX)(y.ZP,{css:[Te.main.gridArea,Z.l0.colWithGap(16)],children:[(0,c.tZ)(y.ZP,{css:[{height:500,"> *":{height:"100%"}}],children:(0,c.tZ)(d.Z,{repl:n,currentUser:t,enableDeeplinks:!0})}),(0,c.tZ)(ce,{repl:n,currentUser:t})]}),(0,c.BX)(y.ZP,{tag:"aside",css:[Te.auxiliary.gridArea,Z.l0.colWithGap(16)],children:[(0,c.tZ)(y.ZP,{children:(0,c.tZ)(Ie,{repl:n})}),(0,c.tZ)(y.ZP,{"data-nosnippet":!0,children:n.relatedRepls.map((function(e){var n=e.name,t=e.repls;return(0,c.BX)(y.ZP,{css:Z.l0.colWithGap(16),children:[(0,c.tZ)(w.h,{level:3,variant:"subheadDefault",children:n}),(0,c.tZ)(y.ZP,{css:Z.l0.colWithGap(16),children:t.map((function(e){return e.publishedAs===s.O2.Template?(0,c.tZ)(pe.Z,{repl:e},e.id):(0,c.tZ)(T.ZP,{showOwner:!0,repl:e,maxVisibleTags:1},e.id)}))})]},n)}))})]}),(0,c.tZ)(y.ZP,{css:[Te.secondary.gridArea],children:(0,c.tZ)(E,{replId:n.id})})]})})}!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.UpdateModal="UpdateModal",e.ForkModal="ForkModal"}(me||(me={}))},23223:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(35944),i=(t(67294),t(92350));function o(e){var n=e.children,t=e.className;return(0,r.tZ)(i.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,children:n})}},65400:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(26042),i=t(69396),o=t(29815),l=t(35944),a=(t(67294),t(1144)),c=t(69346),u=t(81255),s=t(7297),d=t(31230),m=t(47174),p=t(46829);function h(){var e=(0,s.Z)(["\n  query ReplViewForks($replId: String!, $count: Int!, $after: String) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        publicForkCount\n        publicReleasesForkCount\n        publicForks(count: $count, after: $after) {\n          items {\n            id\n            ...ReplPostReplCardRepl\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var f={},Z=(0,d.ZP)(h(),m.n);var v=t(6951),g=t(34847),b=t(4924),C=t(65975);function y(e){var n=function(e){var n=(0,r.Z)({},f,e);return p.useQuery(Z,n)}({variables:{replId:e.replId,count:100}}),t=n.data,s=n.fetchMore,d=n.loading,m="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,h=m?m.publicForks:null,y=m?m.publicForkCount+m.publicReleasesForkCount:null;return(0,l.BX)(c.ZP,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(c.ZP,{children:[null!==y?(0,l.BX)(c.ZP,{css:[u.l0.display.block],children:[(0,l.tZ)(a.x,{variant:"subheadDefault",children:y})," ",(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:(0,g.Z)("forks",y)})]}):null,d?(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null]}),(0,l.BX)(c.ZP,{css:[u.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(c.ZP,{css:[u.l0.p(8),{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:u.TV.space16,gridAutoFlow:"dense"}],children:h?h.items.map((function(e){return(0,l.tZ)(C.Tg,{elevated:!0,css:[u.l0.borderRadius(8)],children:(0,l.tZ)(b.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===h||void 0===h?void 0:h.pageInfo.nextCursor)?(0,l.tZ)(v.Z,{disabled:d,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){d||s({variables:{after:h.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,i.Z)((0,r.Z)({},l),{repl:(0,i.Z)((0,r.Z)({},a),{publicForks:(0,i.Z)((0,r.Z)({},a.publicForks),{items:(0,o.Z)(t.publicForks.items).concat((0,o.Z)(a.publicForks.items))})})}):e}})},children:d?"Loading...":"Load more"}):null]})]})}},33607:function(e,n,t){"use strict";t.d(n,{P9:function(){return b},Qp:function(){return x},cT:function(){return P},cq:function(){return I},g:function(){return k},kz:function(){return E},oY:function(){return T},pn:function(){return W},xB:function(){return y}});var r=t(26042),i=t(7297),o=t(31230),l=t(16092),a=t(46829);function c(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsUser on User {\n    id\n    username\n    image\n    fullName\n    isBlockingCurrentUser\n    ...UserLinkUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplComment on ReplComment {\n    id\n    body\n    timeCreated\n    currentUserPermissions {\n      id\n      edit\n      delete\n      canHideComment\n      report\n    }\n    user {\n      id\n      ...ReplViewCommentsUser\n    }\n    post {\n      id\n      title\n      canPin\n      canHide\n      canChangeBoard\n      canReport\n      hasReported\n    }\n    isHidden\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplCommentThread on ReplComment {\n    id\n    ...ReplViewCommentsReplComment\n    replies {\n      id\n      ...ReplViewCommentsReplComment\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplComment($input: CreateReplCommentInput!) {\n    createReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplCommentReply(\n    $input: CreateReplCommentReplyInput!\n  ) {\n    createReplCommentReply(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplComment($input: UpdateReplCommentInput!) {\n    updateReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        body\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsDeleteReplComment($id: Int!) {\n    deleteReplComment(id: $id) {\n      ... on ReplComment {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplPost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        title\n      }\n    }\n  }\n"]);return f=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  mutation ToggleHiddenComment($commentId: Int!, $isHidden: Boolean!) {\n    toggleHiddenComment(commentId: $commentId, isHidden: $isHidden) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation ReportReplComment($commentId: Int!, $reason: String!) {\n    reportReplComment(replCommentId: $commentId, reason: $reason) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoardReport {\n        id\n      }\n    }\n  }\n"]);return v=function(){return e},e}var g={},b=(0,o.ZP)(c(),l._),C=(0,o.ZP)(u(),b),y=(0,o.ZP)(s(),C),w=(0,o.ZP)(d(),C);function x(e){var n=(0,r.Z)({},g,e);return a.useMutation(w,n)}var R=(0,o.ZP)(m(),C);function P(e){var n=(0,r.Z)({},g,e);return a.useMutation(R,n)}var S=(0,o.ZP)(p());function k(e){var n=(0,r.Z)({},g,e);return a.useMutation(S,n)}var B=(0,o.ZP)(h());function I(e){var n=(0,r.Z)({},g,e);return a.useMutation(B,n)}var U=(0,o.ZP)(f());function E(e){var n=(0,r.Z)({},g,e);return a.useMutation(U,n)}var G=(0,o.ZP)(Z(),C);function T(e){var n=(0,r.Z)({},g,e);return a.useMutation(G,n)}var H=(0,o.ZP)(v());function W(e){var n=(0,r.Z)({},g,e);return a.useMutation(H,n)}},58057:function(e,n,t){"use strict";t.d(n,{x:function(){return Q},H:function(){return $}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=t(60536),c=t.n(a),u=t(67294),s=t(33607),d=t(88075),m=t(93058),p=t(23223),h=t(74591),f=t(57249),Z=t(1144),v=t(69346),g=t(81255);function b(e){var n=e.title;return(0,l.BX)(v.ZP,{css:[g.l0.rowWithGap(8),g.l0.py(8)],children:[(0,l.tZ)(Z.x,{variant:"subheadBig",multiline:!0,css:[{wordBreak:"break-all",flexShrink:1}],children:n}),(0,l.tZ)(Z.x,{color:"dimmer",css:[g.l0.borderRadius(16),g.l0.p(4),{border:"1px solid "+g.TV.outlineDimmer,height:"fit-content"}],children:"Post"})]})}var C=t(37424),y=t(7297),w=t(31230),x=t(46829);function R(){var e=(0,y.Z)(["\n  fragment ReplPostSettingsPost on Post {\n    id\n    isAnnouncement\n    isPinned\n    isLocked\n    isHidden\n    board {\n      id\n      name\n    }\n  }\n"]);return R=function(){return e},e}function P(){var e=(0,y.Z)(["\n  query ReplPostSettings($postId: Int!) {\n    boards {\n      id\n      name\n    }\n    post(id: $postId) {\n      id\n      canPin\n      canHide\n      canChangeBoard\n      board {\n        id\n        name\n      }\n      ...ReplPostSettingsPost\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function S(){var e=(0,y.Z)(["\n  mutation ReplPostSettingsUpdatePost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        ...ReplPostSettingsPost\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var k={},B=(0,w.ZP)(R()),I=(0,w.ZP)(P(),B);var U=(0,w.ZP)(S(),B);var E=t(65975),G=(0,E.KD)("label");function T(e){var n=e.children;return(0,l.tZ)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.align.center],children:n})}function H(e){var n,t=e.postId,i=function(e){p.loading||h&&m({variables:{input:(0,r.Z)({id:h.id},e)}})},a=(0,C.H)(),c=function(e){var n=(0,r.Z)({},k,e);return x.useQuery(I,n)}({variables:{postId:t}}),u=c.data,s=c.loading,d=(0,o.Z)(function(e){var n=(0,r.Z)({},k,e);return x.useMutation(U,n)}(),2),m=d[0],p=d[1];if(s)return null;var h="Post"===(null===u||void 0===u||null===(n=u.post)||void 0===n?void 0:n.__typename)?u.post:null,f=null===u||void 0===u?void 0:u.boards;if(!h||!f)return(0,l.tZ)(E.xv,{children:"Something went wrong"});var Z={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(E.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(E.G7,{css:[E.l0.colWithGap(8)],children:[(0,l.BX)(T,{children:[(0,l.tZ)(E.XZ,{id:Z.isPinned,checked:Boolean(h.isPinned),onChange:function(){return i({isPinned:!h.isPinned})}}),(0,l.tZ)(G,{htmlFor:Z.isPinned,children:"Pin post to Talk feed"})]}),h.canHide?(0,l.BX)(T,{children:[(0,l.tZ)(E.XZ,{id:Z.isHidden,checked:Boolean(h.isHidden),onChange:function(e){return i({isHidden:e.target.checked})}}),(0,l.tZ)(G,{htmlFor:Z.isHidden,children:"Hide post from listing"})]}):null]}),h.canChangeBoard?(0,l.BX)(T,{children:[(0,l.tZ)(E.Ph,{id:Z.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:h.board?{value:h.board,title:h.board.name}:void 0,onChange:function(e){return i({boardId:e.value.id})}}),(0,l.tZ)(G,{htmlFor:Z.isHidden,children:"Change board (requires reload)"})]}):null]})}var W=t(11163),_=t(54917),X=t(86292),A=t(64184),D=t(53429),V=(0,E.KD)("form");function M(e){var n=e.commentId,t=e.onDone,r=(0,u.useState)(""),i=r[0],a=r[1],c=(0,m.Z)(),d=c.showConfirm,p=c.showError,h=(0,o.Z)((0,s.pn)({variables:{commentId:n,reason:i},onCompleted:function(e){"BoardReport"===e.reportReplComment.__typename?(d("Comment reported"),t()):p(e.reportReplComment.message)}}),2),f=h[0],Z=h[1].loading;return(0,l.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(E.h4,{level:2,variant:"subheadBig",children:"Report Comment"}),(0,l.BX)(V,{onSubmit:function(e){e.preventDefault(),i?f():p("Please specify a reason to report this comment.")},css:[E.l0.colWithGap(32)],children:[(0,l.tZ)(E.G7,{css:[E.l0.colWithGap(8)],children:(0,l.tZ)(E.B,{placeholder:"Why do you want to report this comment?",value:i,onChange:function(e){return a(e.currentTarget.value)},css:[E.l0.minHeight(64),E.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(16),E.l0.justify.end],children:[(0,l.tZ)(E.G7,{children:(0,l.tZ)(E.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,l.tZ)(E.G7,{children:(0,l.tZ)(E.zx,{disabled:Z,text:Z?"Reporting":"Report Comment",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(D.Z,{})})})]})]})]})}function F(e){var n=e.initialValue,t=e.commentId,r=e.onReply,i=e.onCancel,a=(0,u.useState)(null),c=a[0],d=a[1],m=(0,o.Z)((0,s.cT)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,X.j)(X.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename||"UnauthorizedError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),p=m[0],h=m[1];return(0,l.tZ)(_.EQ,{error:c,initialValue:n,onCancel:i,onSubmit:function(e){h.loading||p({variables:{input:{body:e,replCommentId:t}}})}})}function $(e){var n=e.replId,t=e.placeholder,r=e.onComment,i=e.autoFocus,a=void 0!==i&&i,c=e.onCancel,m=void 0===c?function(){}:c,p=(0,u.useState)(!1),h=p[0],f=p[1],Z=(0,u.useState)(null),v=Z[0],g=Z[1],b=(0,o.Z)((0,s.Qp)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,X.j)(X.U3.COMMENT_MADE,{source:"spotlight"}),f(!0),void r(n);var t="UserError"===e.createReplComment.__typename||"UnauthorizedError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),C=b[0],y=b[1];return h?(0,l.tZ)(E.E_,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){m(),f(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(_.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:v,onCancel:function(){m(),g(null)},onSubmit:function(e){y.loading||C({variables:{input:{body:e,replId:n}}})}})}var L={background:g.TV.backgroundDefault,boxShadow:"0 0 0 ".concat(g.TV.space8," ").concat(g.TV.backgroundDefault,",0 0 0 10px ").concat(g.TV.accentPrimaryDimmest),borderRadius:g.TV.borderRadius4,scrollPaddingTop:"100px"};function z(e){var n=e.comment,t=e.onReply,a=e.onDelete,m=e.replyToId,f=e.toggleRepliesButton,Z=e.commentsEnabled,v=(0,W.useRouter)().query,g=v.c,b=Number(g),C=(0,o.Z)((0,s.g)(),2),y=C[0],w=C[1],x=(0,o.Z)((0,s.cq)({variables:{id:n.id},onCompleted:function(){T(null),a(n)}}),2),R=x[0],P=x[1],S=(0,o.Z)((0,s.oY)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],k=(0,u.useState)(!1),B=k[0],I=k[1],U=(0,u.useState)(null),G=U[0],T=U[1],H=G===_.nQ.Edit,X=n.user;(0,u.useEffect)((function(){G!==_.nQ.Hide&&G!==_.nQ.Show||S()}),[G,S]);var D=(0,u.useRef)(null),V=b===n.id;if((0,u.useEffect)((function(){(null===D||void 0===D?void 0:D.current)&&V&&D.current.scrollIntoView({behavior:"smooth"})}),[V,v]),!X)return null;var $=n.currentUserPermissions,z=Boolean($);return(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},V?L:null],children:[(0,l.tZ)(E.G7,{innerRef:D,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(_.Yt,{user:X}),(0,l.BX)(E.G7,{css:[E.l0.flex.growAndShrink(1),E.l0.colWithGap(4)],children:[(0,l.BX)(E.G7,{css:[E.l0.align.center,E.l0.rowWithGap(16)],children:[(0,l.tZ)(_.wb,{user:X,timeCreated:n.timeCreated}),n.isHidden&&(0,l.tZ)(E.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(A.Z,{size:12,"alt-text":"This comment is hidden"})})]}),H?(0,l.tZ)(_.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){w.loading||(y({variables:{input:{id:n.id,body:e}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},n),{body:e})}}),T(null))},onCancel:function(){return T(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{children:n.body})}),B?(0,l.tZ)(E.G7,{css:[E.l0.pt(12)],children:(0,l.tZ)(F,{initialValue:"@".concat(X.username," "),commentId:m,onReply:function(e){t(e),I(!1)},onCancel:function(){return I(!1)}})}):(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),{marginLeft:-4}],children:[z&&!n.isHidden&&Z?(0,l.tZ)(_.g4,{onClick:function(){return I(!0)}}):null,f]})]}),H?null:(0,l.tZ)(E.G7,{css:[B&&{visibility:"hidden"}],children:(0,l.tZ)(_.pl,{className:"actions",canEdit:Boolean(null===$||void 0===$?void 0:$.edit),canReport:Boolean(null===$||void 0===$?void 0:$.report),canEditSettings:!1,canDelete:Boolean(null===$||void 0===$?void 0:$.delete),onAction:T,canHideComment:Boolean(null===$||void 0===$?void 0:$.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===$||void 0===$?void 0:$.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)(E.u_,{isOpen:G===_.nQ.Delete,onRequestClose:function(){return T(null)},children:(0,l.tZ)(h.Z,{delete:function(){P.loading||R({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return T(null)}})}),(0,l.tZ)(E.u_,{isOpen:G===_.nQ.Report,onRequestClose:function(){return T(null)},children:(0,l.tZ)(M,{commentId:n.id,onDone:function(){return T(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function q(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,i=e.onCancel,o=(0,u.useState)(n),a=o[0],c=o[1],s=(0,u.useState)(t),m=s[0],p=s[1],h=(0,_.Ex)(),Z=(0,C.H)();return(0,l.BX)(_.l0,{css:[E.l0.colWithGap(8),E.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:m})},children:[(0,l.BX)(E.G7,{css:[E.l0.colWithGap(16)],children:[(0,l.BX)(E.G7,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:Z("title"),children:(0,l.tZ)(E.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,l.tZ)(E.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:Z("title")})]}),(0,l.tZ)(f.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:m})},initialValue:m,onChange:p,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.justify.end],children:[(0,l.tZ)(E.zx,{text:"Cancel",onClick:i}),(0,l.tZ)(E.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===m&&n===a})]})]})}function j(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,f=e.replyToId,Z=e.toggleRepliesButton,v=e.commentsEnabled,g=(0,W.useRouter)().query,C=g.c,y=Number(C),w=(0,m.Z)().showError,x=(0,o.Z)((0,s.kz)({onError:function(e){return w(e.message)}}),2),R=x[0],P=x[1],S=(0,o.Z)((0,s.g)(),2),k=S[0],B=S[1],I=(0,o.Z)((0,s.cq)({variables:{id:t.id},onCompleted:function(){j(null),d(t)}}),2),U=I[0],G=I[1],T=(0,o.Z)((0,s.oY)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],X=(0,u.useState)(!1),D=X[0],V=X[1],$=(0,u.useState)(null),z=$[0],j=$[1],Q=z===_.nQ.Edit,N=t.user;(0,u.useEffect)((function(){z!==_.nQ.Hide&&z!==_.nQ.Show||T()}),[z,T]);var O=(0,u.useRef)(null),Y=y===t.id;if((0,u.useEffect)((function(){(null===O||void 0===O?void 0:O.current)&&Y&&(null===O||void 0===O||O.current.scrollIntoView({behavior:"smooth"}))}),[Y,g.c]),!N)return null;var K=t.currentUserPermissions,J=Boolean(K),ee=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},Y?L:null],children:[(0,l.tZ)(E.G7,{innerRef:O,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(_.Yt,{user:N}),(0,l.BX)(E.G7,{css:[E.l0.flex.growAndShrink(1),E.l0.colWithGap(4),{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(E.G7,{css:[E.l0.align.center,E.l0.rowWithGap(16)],children:[(0,l.tZ)(_.wb,{user:N,timeCreated:t.timeCreated,action:"shared an update"}),t.isHidden&&(0,l.tZ)(E.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(A.Z,{size:12,"alt-text":"This comment is hidden"})})]}),Q?(0,l.tZ)(q,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var o=e.title,l=e.body;B.loading||P.loading||(R({variables:{input:{id:n.id,title:o}},optimisticResponse:{updatePost:{post:(0,i.Z)((0,r.Z)({},n),{title:o})}}}),k({variables:{input:{id:t.id,body:l}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},t),{body:l})}}),j(null))},onCancel:function(){return j(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(E.G7,{children:(0,l.tZ)(b,{title:n.title})}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{children:t.body})})]}),D?(0,l.tZ)(E.G7,{css:[E.l0.pt(12)],children:(0,l.tZ)(F,{initialValue:"@".concat(N.username," "),commentId:f,onReply:function(e){a(e),V(!1)},onCancel:function(){return V(!1)}})}):(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(2),{marginLeft:-4}],children:[J&&v?(0,l.tZ)(_.g4,{onClick:function(){return V(!0)}}):null,Z]})]}),Q?null:(0,l.tZ)(E.G7,{css:[D&&{visibility:"hidden"}],children:(0,l.tZ)(_.pl,{className:"actions",canEdit:Boolean(null===K||void 0===K?void 0:K.edit),canReport:n.canReport,canEditSettings:ee,canDelete:Boolean(null===K||void 0===K?void 0:K.delete),onAction:j,canHideComment:Boolean(null===K||void 0===K?void 0:K.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===K||void 0===K?void 0:K.canHideComment)&&Boolean(t.isHidden)})}),(0,l.tZ)(E.u_,{isOpen:z===_.nQ.Delete,onRequestClose:function(){return j(null)},children:(0,l.tZ)(h.Z,{delete:function(){G.loading||U({variables:{id:t.id}})},entityType:"post",hideModal:function(){return j(null)}})}),(0,l.tZ)(E.u_,{isOpen:z===_.nQ.Report,onRequestClose:function(){return j(null)},children:(0,l.tZ)(M,{commentId:t.id,onDone:function(){return j(null)}})}),(0,l.tZ)(E.u_,{isOpen:z===_.nQ.Settings,onRequestClose:function(){return j(null)},children:(0,l.tZ)(H,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function Q(e){var n,t=e.comment,r=e.onReply,i=e.onDelete,o=e.commentsEnabled,a=(0,W.useRouter)().query.c,c=Number(a),s=t.replies,d=(0,u.useState)(s.some((function(e){return e.id===c}))),m=d[0],p=d[1],h=s.length,f=h?(0,l.tZ)(_.tE,{onClick:function(){return p((function(e){return!e}))},repliesCount:h,isExpanded:m}):null,Z=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return Z?(0,l.BX)(E.Tg,{elevated:!0,css:[E.l0.colWithGap(32),E.l0.p(16),E.l0.borderRadius(8)],children:[(0,l.tZ)(j,{replyToId:t.id,post:Z,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i,commentsEnabled:o}),m?(0,l.tZ)(E.G7,{css:[E.l0.colWithGap(32),E.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(z,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(E.G7,{css:[E.l0.colWithGap(32)],children:[(0,l.tZ)(z,{commentsEnabled:o,replyToId:t.id,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i}),m&&0!==h?(0,l.tZ)(E.G7,{css:[E.l0.colWithGap(32),E.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(z,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]})}},90473:function(e,n,t){"use strict";t.d(n,{ex:function(){return m}});var r=t(26042),i=t(7297),o=t(31230),l=t(33607),a=t(67620),c=t(46829);function u(){var e=(0,i.Z)(["\n  query ReplViewComments($replId: String!, $count: Int = 100, $after: String) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        url\n        owner {\n          ... on User {\n            id\n            ...ReplViewCommentsUser\n          }\n          ... on Team {\n            id\n          }\n        }\n        multiplayers {\n          id\n          ...ReplViewCommentsUser\n        }\n        currentUserPermissions {\n          changeCommentSettings\n        }\n        commentSettings {\n          id\n          enabled\n        }\n        comments(count: $count, after: $after) {\n          items {\n            id\n            ...ReplViewCommentsReplCommentThread\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n        ...ReplViewReplCommentsHeaderRepl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.ZP)(u(),l.P9,l.xB,a.d4);function m(e){var n=(0,r.Z)({},s,e);return c.useQuery(d,n)}},67620:function(e,n,t){"use strict";t.d(n,{d4:function(){return s},k2:function(){return m}});var r=t(26042),i=t(7297),o=t(31230),l=t(46829);function a(){var e=(0,i.Z)(["\n  fragment ReplViewReplCommentsHeaderRepl on Repl {\n    id\n    commentCount\n    currentUserPermissions {\n      changeCommentSettings\n    }\n    commentSettings {\n      id\n      enabled\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplViewReplCommentsHeaderSetReplCommentSettings(\n    $input: SetReplCommentSettingsInput!\n  ) {\n    setReplCommentSettings(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplCommentsHeaderRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.ZP)(a()),d=(0,o.ZP)(c(),s);function m(e){var n=(0,r.Z)({},u,e);return l.useMutation(d,n)}},25958:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=(t(67294),t(48293)),c=t(81255),u=t(1144),s=t(69346),d=t(88961),m=t(2885),p=t(49483),h=t(53427),f=t(87251),Z=t(7657);function v(e){var n=e.repl,t=e.iconEditable,v=e.canModerate,g=(0,o.Z)((0,a.cu)(),1)[0],b=(0,p.W)((function(e){return g({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(s.ZP,{css:[c.l0.colWithGap(8)],children:[(0,l.BX)(s.ZP,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[t?null:(0,l.tZ)(h.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(p.Z,{size:32,value:b.previewUrl||n.iconUrl,onUpload:function(e){return b.uploadImage(e,Z.N.ReplIcon)},isUploading:Boolean(b.previewUrl)}):null,(0,l.tZ)(u.h,{variant:"headerBig",level:1,css:[c.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title}),(0,l.tZ)(m.Z,{repl:n,canModerate:v,source:"coverPage"})]}),b.error?(0,l.tZ)(s.ZP,{css:[c.l0.align.start],children:(0,l.tZ)(f.Z,{icon:(0,l.tZ)(d.Z,{}),colorway:"negative",text:b.error,closable:!0,closeAction:b.clearError})}):null]})}},16496:function(e){!function(){var n=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],t="undefined"!==typeof window,r=t&&null!=window.mozInnerScreenX;function i(e,i,o){if(!t)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var l=o&&o.debug||!1;if(l){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var u=c.style,s=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;u.whiteSpace="pre-wrap",d||(u.wordWrap="break-word"),u.position="absolute",l||(u.visibility="hidden"),n.forEach((function(e){d&&"lineHeight"===e?u.lineHeight=s.height:u[e]=s[e]})),r?e.scrollHeight>parseInt(s.height)&&(u.overflowY="scroll"):u.overflow="hidden",c.textContent=e.value.substring(0,i),d&&(c.textContent=c.textContent.replace(/\s/g,"\xa0"));var m=document.createElement("span");m.textContent=e.value.substring(i)||".",c.appendChild(m);var p={top:m.offsetTop+parseInt(s.borderTopWidth),left:m.offsetLeft+parseInt(s.borderLeftWidth),height:parseInt(s.lineHeight)};return l?m.style.backgroundColor="#aaa":document.body.removeChild(c),p}"undefined"!=typeof e.exports?e.exports=i:t&&(window.getCaretCoordinates=i)}()}}]);
//# sourceMappingURL=8727-9f263a97bee2aa87.js.map